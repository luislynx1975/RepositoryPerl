/* *******************************************************************
    Fecha de Creacion: 11 - 11 - 2010
    Usuarios Server Mysql ...::: TAXQUENA :::...
   
   usuario: venta
   password: D3b1@n5.0
   Servidor: TAXQUENA

   Caracteristicas:
    a) select,insert,uopdate,delete a todas las tablas
              
  Instrucciones:
    a) Escribir la IP del equpipo en donde se va a correr el script, al final del archivo.
    a) Ejecutar este script como root y utlizando la base de datos mysql.
    b) Entrar con el Mysql Administrador y verificar los permisos del usuario
      SELECT
      GRANT
      REFERENCES
      INDEX
      EXECUTE
    C) Entrar al mysql con usuario y pass generados
  
*/

-- ************* CREACION DEL USUARIO ******************************

-- Crear un usuario con privilegios globales de Select,intert,update y delete
-- venta  ES EL USUARIO
-- D3b1@n5.0 ES EL PASSWORD DEL USUARIO
GRANT select ON CORPORATIVO.* TO 'venta'@'%' IDENTIFIED BY 'D3b1@n5.0';
UPDATE db set Grant_priv = 'Y',References_priv = 'Y',Execute_priv='Y', Index_priv='Y' where User='venta' and Db='CORPORATIVO';

--  script para ejecutar los stores
GRANT EXECUTE ON PROCEDURE	PDV_AUDITA_CORTE	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_TOTAL_BOLETOS_CORTE	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	TARIFA_TRAMO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	VERIFICA_CORRIDA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_SHOW_DETALLE_RUTA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_VERIFICA_CORRIDA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_BORRA_CORTE	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_BORRA_RUTA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_BORRA_TRAMOS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_BORRAR_CORRIDAS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_BORRAR_ITINERARIO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_CANCELA_PROCESO_CORTE	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_CORRIDAS_PARA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_DETALLE_COMPLETO_RUTA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_DETALLE_OCUPANTES	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_DETALLE_RUTA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_GENERA_TRAMOS_CON_SERVICIOS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_GENERAR_CORRIDAS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_GENERAR_CORRIDAS_M	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_GUARDAR_ITINERARIO_D	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_GUARDAR_ITINERARIO_OCUPANTE	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_HAY_VENTA_PARA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_IMPORTE_INGRESOS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_INSERTA_TRAMOS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_LIBERA_RESERVADOS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_MODIFICAR_ITINERARIO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_NUEVO_EXTRA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_NUEVO_ITINERARIO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_PROCESA_CORTE_DESCUENTOS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_PROCESA_CORTE_FORMAS_PAGO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_RECOLECTA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_REGRESA_CANCELADOS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_ADD_CANCELADO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_ADD_COORDENADAS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_APARTA_CORRIDA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_ASIENTO_NEW_DELETE	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_ASIENTO_RESERVADO_PASAJERO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_ASIENTO_VENDIDO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_ASIENTOS_CANCELA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_ASIENTOS_RESERVADOS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_AUTOLIBERABLE	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_BORRA_BUS_CORDENADA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_BUSCA_POR_AUTOBUS_XY	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_CORRIDA_ACTUALIZADA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_CUPO_RUTA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_CUPO_RUTA_NEW	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_DESCUENTO_OCUPANTE	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_FOR_CANCELAR	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_ASIENTOS_DISPONIBLES	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_ASIENTOS_DISPONIBLES_CUALES	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_ESTATUS_CORRIDA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_TOTAL_PAX	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_BOLETO_VENDIDO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_CORRIDAS_IMPRESION	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_REGISTRA_BOLETO_NEW	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_LIBERA_CORRIDAS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_MUESTRA_CORRIDAS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_MUESTRA_PREDESPACHO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_NO_AUTOLIBERABLE	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_REGISTRA_CORTE	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_RESERVA_ASIENTO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_RESERVADOS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_RUTAS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_RUTAS_TARIFA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_SHOW_CUPO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_SHOW_DETALLE_RUTA_ORIGEN	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_SHOW_OCUPANTES	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_STATUS_CORRIDAS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_TARIFA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_UPDATE_BOLETO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	ASIENTO_AUTOBUS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	GETCOORDENADAS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	NEW_OCUPANTES	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	MIO_PDV_PROCESA_CORTE_DESCUENTOS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	MIO_PDV_PROCESA_CORTE_FORMAS_PAGO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_REGISTRA_BOLETO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_PROCESA_CORTE	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	MIO_PDV_PROCESA_CORTE	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_AGRUPA_CORRIDAS_UNICA	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_STORE_AGRUPA_CORRIDAS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_CORTE_TIPO_SERVICIO	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_ACTUALIZAR_USUARIOS	TO	'venta'@'%';
GRANT EXECUTE ON PROCEDURE	PDV_CORTE_TIPO_SERVICIO_D	TO	'venta'@'%';

-- ************ ASIGNAR PERMISOS A NIVEL TABLA *******************

-- Primero busca el permiso en la tabla user de forma global
-- SELECT * FROM `user` ;

-- Segundo si no lo encuentra busca en la tabla bd por base
-- SELECT * FROM db ;

-- Tercero busca el permiso a nivel tabla en  tables_priv
-- SELECT * FROM tables_priv ;

-- Despues de esta busqueda lanza el error al no encontrar el permiso

-- SELECT * FROM tables_priv t;

-- Todas las sentencias para las demas tablas
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.EMPLEADOS	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_USUARIO	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_GRUPO_USUARIO	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_GRUPO_PRIVILEGIOS	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_PRIVILEGIO	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_PRIVILEGIO_C_USUARIO	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_T_BOLETO TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_T_BOLETO_CANCELADO  TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_T_CORTE TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_CORTE_D	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_FORMA_PAGO	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_GRUPO_PRIVILEGIOS	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_GRUPO_USUARIO	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_ITINERARIO	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_ITINERARIO_D	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_ITINERARIO_OCUPANTE	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_OCUPANTE	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_PARAMETRO	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_PERIODO_VACACIONAL	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_TAQUILLA	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_TARIFA	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_TARIFA_D	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_TERMINAL	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_TIPO_AUTOBUS	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_C_TIPO_AUTOBUS_D	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_T_ASIENTO	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_T_CORRIDA	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_T_CORRIDA_AGRUPACION	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_T_CORRIDA_D	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_T_CORRIDA_OCUPANTE	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_T_GUIA	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_T_PAGARE	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_T_QUERY	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.PDV_T_RECOLECCION	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.SERVICIOS	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.T_C_AUTOBUS	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.T_C_RUTA	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.T_C_RUTA_D	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.T_C_TERMINAL	TO 'venta'@'%';
GRANT SELECT,INSERT,UPDATE,DELETE  ON CORPORATIVO.T_C_TRAMO	TO 'venta'@'%';

-- Modificar la ip por la direccion ip del server.

UPDATE tables_priv SET Grantor='root@192.168.X.X';
UPDATE procs_priv SET Grantor='root@192.168.X.X';
UPDATE procs_priv SET Db='CORPORATIVO';
